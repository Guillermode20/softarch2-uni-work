@startuml
!theme plain
skinparam ClassAttributeIconSize 0
skinparam roundcorner 10
skinparam sequenceMessageAlign center
title High-Level Inter-Service Communication Patterns

' ===== Participants =====
participant Frontend <<Client>>
participant APIGateway <<Microservice>>
participant AuthService <<Microservice>>
participant UserProfileService <<Microservice>>
participant ConferenceMetadataService <<Microservice>>
participant ConferenceDataService <<Microservice>>
participant UserNotesService <<Microservice>>
participant AdminService <<Microservice>>
participant EventBus <<Infrastructure>>
participant AnalyticsService <<Microservice>>

' ===== Standard User Flow =====
== Standard User Flow ==

Frontend -> APIGateway : HTTPS Request (e.g., Get Schedule, Get Note)
note right of APIGateway : Single Entry Point

activate APIGateway
APIGateway -> AuthService : 1. Validate Token (Sync Call)
activate AuthService
AuthService --> APIGateway : User Context / Validation Result
deactivate AuthService

APIGateway -> ConferenceMetadataService : 2. Get Conf Info (e.g., Endpoint) (Sync Call)
activate ConferenceMetadataService
ConferenceMetadataService --> APIGateway : Metadata / Endpoint
deactivate ConferenceMetadataService

APIGateway -> ConferenceDataService : 3. Request Conference Data (Sync Call)
activate ConferenceDataService
ConferenceDataService --> APIGateway : Schedule / Content Data
deactivate ConferenceDataService

APIGateway -> UserNotesService : 4. Request/Manage Notes (Sync Call)
activate UserNotesService
UserNotesService --> APIGateway : Notes Data / Confirmation
deactivate UserNotesService

' Note: Gateway might also call UserProfileService, etc. depending on request

APIGateway --> Frontend : Aggregated Response
deactivate APIGateway

' ===== Administration Flow =====
== Administration Flow ==

' Admin interactions typically also go via API Gateway, but show logical need here
AdminService -> ConferenceMetadataService : Manage Conferences (Add/Update) (Sync Call)
note left of AdminService : Admin actions often\nmediated by APIGateway
activate ConferenceMetadataService
ConferenceMetadataService --> AdminService : Confirmation
deactivate ConferenceMetadataService

' ===== Asynchronous Analytics Events =====
== Asynchronous Analytics Events ==

note over EventBus : Decouples event producers & consumers

APIGateway ->> EventBus : Publish(User Activity Event)
ConferenceDataService ->> EventBus : Publish(Data Access Event)
AuthService ->> EventBus : Publish(Login/MAU Event)
UserNotesService ->> EventBus : Publish(Note Interaction Event)
' Other services might also publish events

EventBus ->> AnalyticsService : Deliver Events (Async)
activate AnalyticsService
AnalyticsService -> AnalyticsService : Process & Store Events
deactivate AnalyticsService
@enduml